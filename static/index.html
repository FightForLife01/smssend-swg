<!-- FILE: static/index.html -->
<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>SMSsend By SWG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header class="app-header">
      <div class="logo">SMSsend By SWG</div>
      <div class="user-info" id="user-info"></div>
      <button type="button" class="btn secondary btn-small hidden" id="btn-logout">Logout</button>
    </header>

    <main class="app-main">
      <!-- AUTH -->
      <section id="auth-section" class="card">
        <h2>Autentificare</h2>

        <div class="tabs">
          <button id="tab-login" class="tab active">Login</button>
          <button id="tab-register" class="tab">Înregistrare</button>
        </div>

        <form id="login-form" class="form">
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="login-email" required />
          </div>
          <div class="form-group">
            <label>Parolă</label>
            <input type="password" id="login-password" required />
          </div>
          <button type="submit" class="btn primary">Login</button>
        </form>

        <form id="register-form" class="form hidden">
          <div class="form-group">
            <label>Prenume</label>
            <input type="text" id="register-first-name" required />
          </div>

          <div class="form-group">
            <label>Nume</label>
            <input type="text" id="register-last-name" required />
          </div>

          <div class="form-group">
            <label>Email</label>
            <input type="email" id="register-email" required />
          </div>

          <div class="form-group">
            <label>Parolă (min. 12 caractere)</label>
            <input type="password" id="register-password" required minlength="12" />
          </div>

          <div class="form-group">
            <label>Confirmă parola</label>
            <input type="password" id="register-password2" required minlength="12" />
          </div>

          <hr style="border:0;border-top:1px solid rgba(148,163,184,0.15);" />

          <div class="form-group">
            <label>Firmă (opțional)</label>
            <input type="text" id="register-company-name" placeholder="Numele firmei" />
          </div>

          <div class="form-group">
            <label>CUI firmă (obligatoriu dacă ai firmă)</label>
            <input type="text" id="register-company-cui" placeholder="RO12345678" />
          </div>

          <hr style="border:0;border-top:1px solid rgba(148,163,184,0.15);" />

          <div class="form-group">
            <label>Stradă</label>
            <input type="text" id="register-street" required />
          </div>

          <div class="form-group">
            <label>Nr.</label>
            <input type="text" id="register-street-no" required />
          </div>

          <div class="form-group">
            <label>Localitate</label>
            <input type="text" id="register-locality" required />
          </div>

          <div class="form-group">
            <label>Județ</label>
            <input type="text" id="register-county" required />
          </div>

          <div class="form-group">
            <label>Cod poștal</label>
            <input type="text" id="register-postal" required />
          </div>

          <div class="form-group">
            <label>Țară</label>
            <input type="text" id="register-country" required placeholder="Romania / RO" />
          </div>

          <div class="form-group checkbox">
            <input type="checkbox" id="register-policy" />
            <label for="register-policy">
              Confirm că am citit și accept politicile aplicației.
            </label>
          </div>

          <button type="submit" class="btn primary">Creează cont</button>
        </form>
      </section>

      <p class="hint" style="margin-top:8px;">
        SMSsend By SWG este un instrument gratuit. Fiecare utilizator este responsabil legal
        pentru textele trimise și destinatarii folosiți prin contul său. Prin crearea contului
        confirmi că ai citit și accepți termenii și politicile aplicatiei.
      </p>

      <!-- APP MAIN -->
      <section id="app-section" class="hidden">
        <!-- 3 carduri sus: import, filtru, setări SMS -->
        <div class="layout-three-columns">
          <div class="card">
            <h2>Import comenzi eMAG (Excel)</h2>
            <p class="hint">
              Acceptăm doar fișiere <strong>.xlsx</strong> exportate din eMAG, fără formule.
            </p>
            <form id="upload-form" class="form">
              <div class="form-group">
                <input type="file" id="upload-file" accept=".xlsx" required />
              </div>
              <button type="submit" class="btn primary">Încarcă fișier</button>
            </form>
          </div>

          <div class="card">
            <h2>Filtru comenzi</h2>
            <form id="filter-form" class="form">
              <div class="form-group">
                <label>Pagina</label>
                <input type="number" id="filter-page" min="1" value="1" />
              </div>
              <div class="form-group">
                <label>Rânduri/pagină</label>
                <input type="number" id="filter-page-size" min="1" max="200" value="50" />
              </div>
              <button type="submit" class="btn">Aplică</button>
              <button type="button" id="btn-refresh" class="btn secondary">Reîncarcă</button>
            </form>
          </div>

          <div class="card">
            <h2>Setări SMSAPI</h2>
            <p class="hint">
              Creează cont pe <strong>smsapi.ro</strong>, generează un token OAuth și setează expeditorul (sender).
            </p>

            <form id="sms-settings-form" class="form">
              <div class="form-group">
                <label>Token SMSAPI</label>
                <input type="password" id="sms-token" autocomplete="off" />
              </div>
              <div class="form-group">
                <label>Expeditor (sender)</label>
                <input type="text" id="sms-sender" autocomplete="off" />
              </div>
              <div class="form-group">
                <label>Numele firmei pentru SMS</label>
                <input
                  type="text"
                  id="sms-company-name"
                  autocomplete="off"
                  placeholder="Adaugă numele firmei tale"
                />
              </div>
              <button type="submit" class="btn primary">Salvează setările</button>
            </form>

            <div class="sms-info">
              <p>Credite SMSAPI (points): <span id="sms-balance-points">-</span></p>
              <p>
                SMS trimise: <span id="sms-total-sent">-</span>
                (erori: <span id="sms-total-errors">-</span>)
              </p>
              <button type="button" class="btn secondary btn-small" id="btn-sms-doc">
                Documentație SMSAPI
              </button>
            </div>

            <div id="sms-doc-card" class="doc-card hidden">
              <h3>Scurt ghid SMSAPI</h3>
              <ul>
                <li>1) Creezi cont pe <strong>smsapi.ro</strong>.</li>
                <li>2) În portal → OAuth Tokens → generezi un token.</li>
                <li>3) În portal → Sender names → setezi un sender activ.</li>
                <li>4) În acest dashboard, la Setări SMSAPI pui token-ul și sender-ul.</li>
                <li>5) Mesajele se trimit prin <code>https://api.smsapi.ro/sms.do</code> cu <code>Authorization: Bearer token</code>.</li>
                <li>6) Linkul de recenzie se scurtează cu <code>[%goto:URL%]</code>.</li>
              </ul>
              <button type="button" class="btn secondary btn-small" id="btn-sms-doc-close">Închide</button>
            </div>
          </div>
        </div>

        <!-- Card PNK → URL recenzie sub cele 3 carduri -->
        <div class="card" id="product-links-card">
          <h2>Linkuri produse eMAG (PNK → URL recenzie)</h2>
          <p class="hint">
            Pentru fiecare PNK (ex. <code>DDV184YBM</code>) adaugă linkul de recenzie eMAG
            (ideal cu <code>#reviews-section</code>).
          </p>
          <form id="product-link-form" class="product-link-form">
            <div class="product-link-row">
              <input
                type="text"
                id="product-link-pnk"
                class="product-link-pnk"
                placeholder="PNK ex. PPK234XYZ"
              />
              <span class="product-link-equal">=</span>
              <input
                type="text"
                id="product-link-url"
                class="product-link-url"
                placeholder="https://www.emag.ro/...#reviews-section"
              />
              <button type="submit" class="btn primary btn-small">
                Salvează maparea
              </button>
            </div>
          </form>

          <div class="product-links-toggle-row">
            <button type="button" class="btn secondary btn-small" id="btn-product-links-toggle">
              Afișează lista PNK
            </button>
          </div>

          <div id="product-links-list" class="product-links-list hidden">
            <!-- lista cu PNK = URL -->
          </div>
        </div>

        <!-- Card comenzi -->
        <div class="card">
          <h2>Comenzi importate</h2>
          <p class="hint" id="orders-meta"></p>
          <div class="table-wrapper">
            <table id="orders-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nr. comandă</th>
                  <th>Data</th>
                  <th>Produs</th>
                  <th>PNK</th>
                  <th>Telefon</th>
                  <th>Status</th>
                  <th>Plată</th>
                  <th>SMS status</th>
                  <th>Istoric SMS nr.</th>
                  <th>SMS</th>
                </tr>
              </thead>
              <tbody id="orders-tbody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <div id="status-bar" class="status-bar"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
